{"version":3,"sources":["../../src/routes/gallery.js"],"names":["BASE_URL","PATH","HEADERS","makeRequest","url","res","get","headers","then","json","data","catch","e","err","message","response","error","createGalleryRoutes","app","req","section","params","sort","w","window","page","showViral","query","imageId","id","path"],"mappings":";;;;;;;AAAA;;;;;;AAEA,IAAMA,WAAW,yBAAjB;AACA,IAAMC,OAAO,SAAb;;AAEA,IAAMC,UAAU;AACd,kBAAgB,kBADF;AAEd,mBAAiB;AAFH,CAAhB;;AAKA;;;;;;;;;AASA,IAAMC,cAAc,SAAdA,WAAc,CAACC,GAAD,EAAMC,GAAN,EAAc;AAChC,SAAO,gBACJC,GADI,CACAF,GADA,EACK,EAAEG,SAASL,OAAX,EADL,EAEJM,IAFI,CAEC;AAAA,WAAQH,IAAII,IAAJ,CAASC,KAAKA,IAAd,CAAR;AAAA,GAFD,EAGJC,KAHI,CAGE,UAACC,CAAD;AAAA,WAAOP,IAAII,IAAJ,CAAS,EAAEI,KAAK,EAAEC,SAASF,EAAEG,QAAF,CAAWL,IAAX,CAAgBA,IAAhB,CAAqBM,KAAhC,EAAP,EAAT,CAAP;AAAA,GAHF,CAAP;AAID,CALD;;AAOA;;;;;AAKO,IAAMC,oDAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAS;;AAE1C;;;;;AAKAA,MAAIZ,GAAJ,CAAQ,2CAAR,EAAqD,UAACa,GAAD,EAAMd,GAAN,EAAc;AACjE,QAAMe,UAAUD,IAAIE,MAAJ,CAAWD,OAAX,IAAsB,KAAtC;AACA,QAAME,OAAUH,IAAIE,MAAJ,CAAWC,IAAX,IAAmB,OAAnC;AACA,QAAMC,IAAUJ,IAAIE,MAAJ,CAAWG,MAAX,IAAqB,KAArC;AACA,QAAMC,OAAUN,IAAIE,MAAJ,CAAWI,IAAX,IAAmB,CAAnC;AACA,QAAMC,YAAYP,IAAIQ,KAAJ,CAAUD,SAAV,IAAuB,IAAzC;;AAEA,QAAMtB,MAASJ,QAAT,SAAqBC,IAArB,SAA6BmB,OAA7B,SAAwCE,IAAxC,SAAgDC,CAAhD,SAAqDE,IAArD,mBAAuEC,SAA7E;AACAvB,gBAAYC,GAAZ,EAAiBC,GAAjB;AACD,GATD;;AAWA;;;;;AAKAa,MAAIZ,GAAJ,CAAQ,oBAAR,EAA8B,UAACa,GAAD,EAAMd,GAAN,EAAc;AAC1C,QAAMuB,UAAUT,IAAIE,MAAJ,CAAWQ,EAA3B;AACA,QAAMzB,MAASJ,QAAT,SAAqB8B,IAArB,eAAmCF,OAAzC;;AAEAzB,gBAAYC,GAAZ,EAAiBC,GAAjB;AACD,GALD;AAMD,CA7BM","file":"gallery.js","sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.imgur.com/3';\nconst PATH = 'gallery';\n\nconst HEADERS = {\n  'Content-Type': 'application/json',\n  'Authorization': 'Client-ID 12f546c383eeb36'\n}\n\n/**\n * Helper method to make a request\n *\n * @method makeRequest\n *\n * @param  {String} url The url string\n * @param  {Object} res The response object\n * @return {Object}\n */\nconst makeRequest = (url, res) => {\n  return axios\n    .get(url, { headers: HEADERS })\n    .then(data => res.json(data.data))\n    .catch((e) => res.json({ err: { message: e.response.data.data.error }}))\n}\n\n/**\n * Create the gallery routes\n * @public\n * @param {Object} app App instance\n */\nexport const createGalleryRoutes = (app) => {\n\n  /**\n   * Get the gallery by page.\n   *\n   * @see https://api.imgur.com/endpoints/gallery#gallery\n   */\n  app.get('/gallery/:section?/:sort?/:window?/:page?', (req, res) => {\n    const section = req.params.section || 'hot';\n    const sort    = req.params.sort || 'viral';\n    const w       = req.params.window || 'day';\n    const page    = req.params.page || 0;\n    const showViral = req.query.showViral || true;\n\n    const url = `${BASE_URL}/${PATH}/${section}/${sort}/${w}/${page}?showViral=${showViral}`;\n    makeRequest(url, res);\n  });\n\n  /**\n   * Get a image details.\n   *\n   * @see https://api.imgur.com/endpoints/gallery#image\n   */\n  app.get('/gallery/image/:id', (req, res) => {\n    const imageId = req.params.id;\n    const url = `${BASE_URL}/${path}/image/${imageId}`;\n\n    makeRequest(url, res);\n  });\n}\n"]}